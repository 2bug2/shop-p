{"version":3,"sources":["webpack:///./src/assets/avatar.png","webpack:///./src/views/User.vue?60d7","webpack:///src/views/User.vue","webpack:///./src/views/User.vue?3db7","webpack:///./src/views/User.vue","webpack:///./src/views/User.vue?6ed2"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","on","openModel","avatarSrc","_v","_s","nickName","iconClick","staticClass","closeModal","onSubmit","required","message","model","value","callback","$$v","username","expression","password","staticStyle","_e","staticRenderFns","data","showModal","created","token","newUserInfo","avatar","methods","values","pwd","console","log","res","errno","localStorage","setItem","setTimeout","$toast","fail","component"],"mappings":"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","file":"js/chunk-43e86dd0.fea8a9e0.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+BAMAAAAQDbi7AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAASUExURfjz8NTIvOPa0drQxe3l3/Pt6dJ8uJYAAAGKSURBVFjD7ZjNboMwEIT5vccxuZPS3qHJA4SouQPp+z9LkSJVBduw42mEqnrun9de744XoigoKCgoKCjoN5V/VI1Sp5eLH34d4YdePejPb3rUGQ+uJkIXiNVMJcanc35P8uAGEsVtwOQVVAWZyddkfOgAR5NXHZN+7AZs4YEE5DZcHZjsjyq44wMXYOe1f/c9FPg/wqdP4TXjHlD9sjzbfxnZ/3b/2Mn9q+H8y+5/cv8crPyppI4vv8DEwWuu/MV8vHH89En5K6jyBxrAwddU+QIF3Nv5jvMfTfa/3D+ilpx/soac3zJy/oyI7NkdsMD4lhp/LR4AfoQl3PeHkYAa5Xsm+0YNlzAf3ZnTz0poF/j/xl9/NoB+v2H0YPgHskJWWZ/fm8/WJ3uQvEB5pZzSb17WD/yIGdSK9h2FLy8gwJcWEOFuN0qUUGefzK/a6VGMK90t++2qCvHQ59BFNLK4deDCGxnoQX5+BQ3KF9T25y9yDPPTabbF+dKz9qwTSUPyOD59U7bmm634LwhiuCxbAoGfAAAAAElFTkSuQmCC\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-row',[_c('van-col',{attrs:{\"span\":\"6\"},on:{\"click\":_vm.openModel}},[_c('img',{attrs:{\"src\":_vm.avatarSrc,\"alt\":\"\"}})]),_c('van-col',{attrs:{\"span\":\"10\"}},[_vm._v(_vm._s(_vm.nickName))]),_c('van-col',{attrs:{\"span\":\"8\"}},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)],1),_c('van-grid',{attrs:{\"column-num\":3}},[_c('van-grid-item',{attrs:{\"icon\":\"coupon-o\",\"text\":\"我的订单\"},on:{\"click\":_vm.iconClick}}),_c('van-grid-item',{attrs:{\"icon\":\"bill-o\",\"text\":\"优惠卷\"},on:{\"click\":_vm.iconClick}}),_c('van-grid-item',{attrs:{\"icon\":\"bag-o\",\"text\":\"礼品卡\"},on:{\"click\":_vm.iconClick}}),_c('van-grid-item',{attrs:{\"icon\":\"location-o\",\"text\":\"我的收藏\"},on:{\"click\":_vm.iconClick}})],1),(_vm.showModal)?_c('div',{staticClass:\"login_modal\"},[_c('section',{on:{\"click\":_vm.closeModal}}),_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"用户名\",\"label\":\"用户名\",\"placeholder\":\"用户名\",\"rules\":[{ required: true, message: '请填写用户名' }]},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"密码\",\"label\":\"密码\",\"placeholder\":\"密码\",\"rules\":[{ required: true, message: '请填写密码' }]},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <van-row>\n      <van-col span=\"6\" @click=\"openModel\">\n        <img :src=\"avatarSrc\" alt=\"\" />\n      </van-col>\n      <van-col span=\"10\">{{ nickName }}</van-col>\n      <van-col span=\"8\">\n        <van-icon name=\"arrow\" />\n      </van-col>\n    </van-row>\n    <!-- 九宫格 -->\n    <van-grid :column-num=\"3\">\n      <van-grid-item icon=\"coupon-o\" text=\"我的订单\" @click=\"iconClick\" />\n      <van-grid-item icon=\"bill-o\" text=\"优惠卷\" @click=\"iconClick\" />\n      <van-grid-item icon=\"bag-o\" text=\"礼品卡\" @click=\"iconClick\" />\n      <van-grid-item icon=\"location-o\" text=\"我的收藏\" @click=\"iconClick\" />\n    </van-grid>\n    <!-- 登录模态框 -->\n    <div class=\"login_modal\" v-if=\"showModal\">\n      <section @click=\"closeModal\"></section>\n\n      <van-form @submit=\"onSubmit\">\n        <van-field\n          v-model=\"username\"\n          name=\"用户名\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"password\"\n          type=\"password\"\n          name=\"密码\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <div style=\"margin: 16px\">\n          <van-button round block type=\"info\" native-type=\"submit\"\n            >提交</van-button\n          >\n        </div>\n      </van-form>\n    </div>\n  </div>\n</template>\n\n<script>\n// 引入登录接口\nimport { Gologin } from '@/request/api'\nexport default {\n  data() {\n    return {\n      avatarSrc: require('@/assets/avatar.png'),\n      username: '',\n      password: '',\n      showModal: true,\n      nickName: '点击登录'\n    }\n  },\n  created() {\n    // 每次进入user界面 就直接判断有没token，如果有，就读取userInfo来渲染头像和昵称\n    let token = localStorage.getItem('token');\n    if (token) {\n      let userInfo = localStorage.getItem('userInfo')\n      let newUserInfo = JSON.parse(userInfo)\n      // 修改用户头像和用户昵称\n      this.avatarSrc = newUserInfo.avatar;\n      this.nickName = newUserInfo.username\n      this.showModal = false\n    }\n  },\n  methods: {\n    onSubmit(values) {\n\n      Gologin({\n        username: values['用户名'],\n        pwd: values['密码'],\n      }).then(res => {\n        console.log(res)\n        if (res.errno == 0) {\n          let { userInfo, token } = res.data;\n          let newUserInfo = JSON.stringify(userInfo)\n          localStorage.setItem('token', token)\n          localStorage.setItem('userInfo', newUserInfo)\n          this.$toast.success('登录成功');\n          // 修改用户头像和用户昵称\n          this.avatarSrc = userInfo.avatar;\n          this.nickName = userInfo.username\n          setTimeout(() => {\n            this.closeModal();\n          }, 1000)\n        } else if (res.errno == 602) {\n          this.$toast('密码错误');\n        }\n      })\n    },\n    // 关闭模态框\n    closeModal() {\n      this.showModal = false\n    },\n    // 点击打开模态框\n    openModel() {\n\n      // 获取localStorage\n      let token = localStorage.getItem('token');\n      if (!token) {\n        this.showModal = true\n      }\n      return;\n    },\n    // iconClick点击\n    iconClick() {\n      this.$toast.fail('该功能暂未开放');\n    }\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.van-row {\n  padding: 0.4rem 2%;\n  background-color: #333;\n  color: #fff;\n  .van-col {\n    line-height: 6rem;\n    font-size: 1.1rem;\n    img {\n      // padding-top: 10px;\n      width: 5.5rem;\n      border-radius: 50%;\n      display: block;\n    }\n    &:last-child {\n      text-align: right;\n    }\n  }\n}\n.login_modal {\n  width: 100%;\n  height: 100vh;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 77;\n  section {\n    width: 100%;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n  .van-form {\n    width: 90%;\n    position: absolute;\n    top: 40vh;\n    left: 50%;\n    margin-left: -45%;\n    padding: 0.1rem;\n    box-sizing: border-box;\n    background: #fff;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=bb1947b8&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=bb1947b8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bb1947b8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=bb1947b8&lang=less&scoped=true&\""],"sourceRoot":""}